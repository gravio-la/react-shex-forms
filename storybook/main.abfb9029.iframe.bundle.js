(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./.storybook/preview.js-generated-config-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var preview_namespaceObject={};__webpack_require__.r(preview_namespaceObject),__webpack_require__.d(preview_namespaceObject,"parameters",(function(){return parameters})),__webpack_require__.d(preview_namespaceObject,"argTypes",(function(){return argTypes}));__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-properties.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js");var ClientApi=__webpack_require__("./node_modules/@storybook/client-api/dist/esm/ClientApi.js"),parameters=(__webpack_require__("./node_modules/semantic-ui-css/semantic.css"),{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}},layout:"centered"}),argTypes={};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.keys(preview_namespaceObject).forEach((function(key){var value=preview_namespaceObject[key];switch(key){case"args":return Object(ClientApi.d)(value);case"argTypes":return Object(ClientApi.b)(value);case"decorators":return value.forEach((function(decorator){return Object(ClientApi.f)(decorator,!1)}));case"loaders":return value.forEach((function(loader){return Object(ClientApi.g)(loader,!1)}));case"parameters":return Object(ClientApi.h)(function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}({},value),!1);case"argTypesEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.c)(enhancer)}));case"argsEnhancers":return value.forEach((function(enhancer){return Object(ClientApi.e)(enhancer)}));case"render":return Object(ClientApi.i)(value);case"globals":case"globalTypes":var v={};return v[key]=value,Object(ClientApi.h)(v,!1);case"__namedExportsOrder":case"decorateStory":case"renderToDOM":return null;default:return console.log(key+" was not supported :( !")}}))},"./generated-stories-entry.js":function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js").configure)([__webpack_require__("./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx))$")],module,!1)}).call(this,__webpack_require__("./node_modules/webpack/buildin/module.js")(module))},"./node_modules/css-loader/dist/cjs.js?!./node_modules/@storybook/builder-webpack4/node_modules/postcss-loader/dist/cjs.js?!./src/styles.module.css":function(module,exports,__webpack_require__){(exports=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([module.i,".container {\n  display: block;\n}\n",""]),module.exports=exports},"./src/styles.module.css":function(module,exports,__webpack_require__){var api=__webpack_require__("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),content=__webpack_require__("./node_modules/css-loader/dist/cjs.js?!./node_modules/@storybook/builder-webpack4/node_modules/postcss-loader/dist/cjs.js?!./src/styles.module.css");"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},"./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx))$":function(module,exports,__webpack_require__){var map={"./ShexForm.stories.tsx":"./stories/ShexForm.stories.tsx"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="./stories sync ^\\.[\\\\/](?:(?!\\.)(?=.)[^/]*?\\.stories\\.(ts|tsx))$"},"./stories/ShexForm.stories.tsx":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"BasicForm",(function(){return BasicForm}));__webpack_require__("./node_modules/core-js/modules/es.object.assign.js"),__webpack_require__("./node_modules/core-js/modules/es.function.bind.js");var react=__webpack_require__("./node_modules/react/index.js"),Container_Container=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Container/Container.js"),xsd=(__webpack_require__("./node_modules/core-js/modules/es.string.split.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.exec.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.find.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("./node_modules/core-js/modules/es.object.entries.js"),__webpack_require__("./node_modules/core-js/modules/es.string.starts-with.js"),__webpack_require__("./node_modules/core-js/modules/es.object.keys.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.regexp.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.join.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.array.index-of.js"),__webpack_require__("./node_modules/@ontologies/xsd/index.js")),shex_core=__webpack_require__("./node_modules/@shexjs/core/shex-core.js"),shex_core_default=__webpack_require__.n(shex_core),shex_parser=__webpack_require__("./node_modules/@shexjs/parser/shex-parser.js"),shex_parser_default=__webpack_require__.n(shex_parser),Dropdown=__webpack_require__("./node_modules/semantic-ui-react/dist/es/modules/Dropdown/Dropdown.js"),Form=__webpack_require__("./node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),Input=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Input/Input.js"),FormDropdown=__webpack_require__("./node_modules/semantic-ui-react/dist/es/collections/Form/FormDropdown.js"),Segment=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),Label=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Label/Label.js"),Icon=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Icon/Icon.js"),Button=__webpack_require__("./node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),styles_module=__webpack_require__("./src/styles.module.css"),styles_module_default=__webpack_require__.n(styles_module),filterUndefOrNull=function filterUndefOrNull(ts){return(null==ts?void 0:ts.filter((function(t){return null!=t})))||[]},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["baseURI","value","onChange","onRemove","allowDelete","label","error"],_excluded2=["datatype","onChange","onRemove","value","allowDelete"],_excluded3=["path"],_excluded4=["values"],_excluded5=["valueExpr"];function _slicedToArray(arr,i){return _arrayWithHoles(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toArray(arr){return _arrayWithHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var ShexForm_Container=function Container(_ref){var children=_ref.children,shapeName=_ref.shapeName,notImplemented=_ref.notImplemented;return Object(jsx_runtime.jsxs)("div",{children:[Object(jsx_runtime.jsxs)("span",{style:{display:"none"},children:[shapeName||null,notImplemented&&"not implemented"]}),children||null]})};ShexForm_Container.displayName="Container";var iri2Label=function iri2Label(predicate){var parts=predicate.split("#");return(parts=parts[parts.length-1].split("/"))[parts.length-1]},toOptions=function toOptions(shapes){return(null==shapes?void 0:shapes.map((function(s){return{key:s.id,text:s.id,value:s.id}})))||[]},getSubTreeByPath=function getSubTreeByPath(doc,path){if(0===path.length)return doc;var _path=_toArray(path),pathEl=_path[0],restPath=_path.slice(1);if("number"==typeof pathEl){var doc_=doc||[];if(!Array.isArray(doc_))throw new Error("cannot descant into an object, as path component is not a number");return getSubTreeByPath(doc_[pathEl],restPath)}return getSubTreeByPath((doc||{})[pathEl],restPath)},removeFromRDFDocument=function removeFromRDFDocument(doc,path,value){if(0===path.length)return doc;var _Object$assign,_path2=_toArray(path),pathEl=_path2[0],restPath=_path2.slice(1),descendantDoc=doc[pathEl];if("number"==typeof pathEl){var doc_=doc||[];if(!Array.isArray(doc_))throw new Error("cannot descant into an object, as path component is not a number");if(doc_.length>pathEl)return 0===restPath.length?doc_.filter((function(element,i){return i!==pathEl})):doc_.map((function(element,i){return i===pathEl?removeFromRDFDocument(element,restPath,value):element}));if(0===restPath.length)return doc_;if(!descendantDoc)throw new Error("cannot descant into object, descendant is not defined");return[].concat(_toConsumableArray(doc_),[removeFromRDFDocument(descendantDoc,restPath,value)])}if(0===restPath.length){var _ref4=doc||{};_ref4[pathEl];return _objectWithoutProperties(_ref4,[pathEl].map(_toPropertyKey))}if(!descendantDoc)throw new Error("cannot descant into object, descendant is not defined");return Object.assign({},doc,((_Object$assign={})[pathEl]=removeFromRDFDocument(descendantDoc,restPath,value),_Object$assign))},updateRDFDocument=function updateRDFDocument(doc,path,value,isIRI){if(0===path.length)return value||(isIRI?"":{});var _path3=_toArray(path),pathEl=_path3[0],restPath=_path3.slice(1);if("number"==typeof pathEl){var doc_=doc||[];if(!Array.isArray(doc_))throw new Error("cannot descant into an object, as path component is not a number");if(doc_.length>pathEl){var descendantDoc=doc_[pathEl];return doc_.map((function(element,i){return i===pathEl?updateRDFDocument(descendantDoc,restPath,value,isIRI):element}))}return[].concat(_toConsumableArray(doc_),[updateRDFDocument(null,restPath,value,isIRI)])}var _Object$assign2,_doc_3=doc||{},_descendantDoc=_doc_3[pathEl]||[];return Object.assign({},_doc_3,((_Object$assign2={})[pathEl]=updateRDFDocument(_descendantDoc,restPath,value,isIRI),_Object$assign2))};function ShexForm(_ref5){var shexDocument=_ref5.shexDocument,startShapeURI=_ref5.startShapeURI,baseURI=_ref5.baseURI,rootURI=_ref5.rootURI,_useState2=_slicedToArray(Object(react.useState)(void 0),2),schema=_useState2[0],setShexj=_useState2[1],_useState4=_slicedToArray(Object(react.useState)(void 0),2),startShape=_useState4[0],setStartShape=_useState4[1],_useState6=_slicedToArray(Object(react.useState)(!1),2),showStartShapeChooser=_useState6[0],setShowStartShapeChooser=_useState6[1],_useState8=_slicedToArray(Object(react.useState)({"@id":rootURI}),2),rdfDocument=_useState8[0],setRdfDocument=_useState8[1];Object(react.useEffect)((function(){startShape||(setShowStartShapeChooser(!0),null!=schema&&schema.shapes&&setStartShape(schema.shapes[0]))}),[schema,startShape,setStartShape,setShowStartShapeChooser]),Object(react.useEffect)((function(){if("string"==typeof shexDocument){var parsedAS=shex_parser_default.a.construct(baseURI).parse(shexDocument),shexJ=shex_core_default.a.Util.AStoShExJ(parsedAS);setShexj(shexJ)}else setShexj(shexDocument)}),[shexDocument,baseURI]),Object(react.useEffect)((function(){schema&&startShapeURI&&setShowStartShapeChooser(!1)}),[schema,startShapeURI]);var handleChange=Object(react.useCallback)((function(context,change){console.log({path:context.path,change:change});try{var _path4=_toArray(context.path).slice(1),newDoc=updateRDFDocument(rdfDocument,_path4,change.value,change.isIRI);setRdfDocument(newDoc)}catch(e){console.error(e)}}),[rdfDocument,setRdfDocument]),handleRemove=Object(react.useCallback)((function(context,change){var path=_toArray(context.path).slice(1);try{var newDoc=removeFromRDFDocument(rdfDocument,path,change);setRdfDocument(newDoc)}catch(e){console.error(e)}}),[rdfDocument,setRdfDocument]),handleAddEmptyElement=Object(react.useCallback)((function(context,isIRI){var path=_toArray(context.path).slice(1),newDoc=updateRDFDocument(rdfDocument,path,null,isIRI);setRdfDocument(newDoc)}),[rdfDocument,setRdfDocument]);return Object(jsx_runtime.jsxs)("div",{className:styles_module_default.a.container+" container",children:[showStartShapeChooser&&Object(jsx_runtime.jsx)(Dropdown.a,{placeholder:"Start Shape",fluid:!0,selection:!0,options:toOptions(null==schema?void 0:schema.shapes),value:null==startShape?void 0:startShape.id,onChange:function onChange(e,data){return schema&&setStartShape(function findStartShape(schema,startShapeURI){var _schema$shapes;return null==schema||null===(_schema$shapes=schema.shapes)||void 0===_schema$shapes?void 0:_schema$shapes.find((function(_ref2){return _ref2.id===startShapeURI}))}(schema,data.value))}}),schema&&startShape&&Object(jsx_runtime.jsxs)(Form.a,{children:[Object(jsx_runtime.jsx)("h1",{children:null==startShape?void 0:startShape.id}),Object(jsx_runtime.jsx)(ShexForm_ShapeDeclComponent,{context:{schema:schema,path:[rootURI],rdfDocument:rdfDocument,baseURI:baseURI,events:{onChange:handleChange,onRemove:handleRemove,onAddEmptyElement:handleAddEmptyElement}},shapeDecl:startShape})]})]})}ShexForm.displayName="ShexForm";var prefixes={tel:"tel:",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",vc:"http://www.w3.org/2006/vcard/ns#","*":""},ShexForm_IRIChooser=function IRIChooser(_ref8){_ref8.baseURI;var value=_ref8.value,_onChange=_ref8.onChange,onRemove=_ref8.onRemove,allowDelete=_ref8.allowDelete,label=_ref8.label,error=_ref8.error,props=_objectWithoutProperties(_ref8,_excluded),action=allowDelete?{icon:"close",disabled:null==value,onClick:function onClick(){return onRemove()}}:void 0,_ref9=value&&function fromValue(iri,prefixes){var prefix=Object.entries(prefixes).find((function(_ref6){var substitution=_slicedToArray(_ref6,2)[1];return substitution.length>0&&iri.startsWith(substitution)}));if(prefix){var _prefix=_slicedToArray(prefix,2),key=_prefix[0],substitution=_prefix[1];return{prefix:{key:key,substitution:substitution},part:iri.substring(substitution.length),iri:iri}}}(value,prefixes)||{},prefix=_ref9.prefix,part=_ref9.part;console.log({prefix:prefix,part:part,value:value});var handlePrefixChange=Object(react.useCallback)((function(_e,data){var key=data.value,_ref10=Object.entries(prefixes).find((function(_ref12){var v=_slicedToArray(_ref12,2)[1];return v.length>0&&(null==value?void 0:value.startsWith(v))}))||[],_ref11=_slicedToArray(_ref10,2),prevSubstitution=(_ref11[0],_ref11[1]);console.log({key:key,value:value}),"*"===key&&value&&_onChange(value);var substitution=prefixes[key];if(substitution){var part=prevSubstitution?null==value?void 0:value.substring(prevSubstitution.length):"";_onChange(""+substitution+part)}}),[value,_onChange]);return Object(jsx_runtime.jsxs)(Form.a.Field,Object.assign({error:error?{content:error,pointing:"below"}:void 0},props,{children:[Object(jsx_runtime.jsx)("label",{children:label}),Object(jsx_runtime.jsx)(Input.a,{type:"text",label:Object(jsx_runtime.jsx)(Dropdown.a,{value:(null==prefix?void 0:prefix.key)||"*",onChange:handlePrefixChange,options:Object.keys(prefixes).map((function(key){return{key:key,text:key+":",value:key}}))}),value:part||"",action:action,actionPosition:"left",onChange:function onChange(e){return _onChange(null!=prefix&&prefix.substitution?function toValue(part,prefix){return""+prefix+part}(e.target.value,prefix.substitution):e.target.value)}})]}))};ShexForm_IRIChooser.displayName="IRIChooser";var ShexForm_PrimitiveForm=function PrimitiveForm(_ref14){var datatype=_ref14.datatype,_onChange2=_ref14.onChange,onRemove=_ref14.onRemove,value=_ref14.value,allowDelete=_ref14.allowDelete,props=_objectWithoutProperties(_ref14,_excluded2),action=allowDelete?{icon:"close",disabled:null==value,onClick:function onClick(){return onRemove()}}:void 0;switch(datatype){case xsd.b.value:return Object(jsx_runtime.jsx)(Form.a.Input,Object.assign({},props,{action:action,actionPosition:"left",type:"text",onChange:function onChange(e){return _onChange2({"@value":e.target.value})},value:value||""}));case xsd.a.value:return Object(jsx_runtime.jsx)(Form.a.Input,Object.assign({},props,{action:action,actionPosition:"left",onChange:function onChange(e){return _onChange2({"@value":e.target.value})},value:value||"",type:"number"}));case xsd.c.value:return Object(jsx_runtime.jsx)(Form.a.Checkbox,Object.assign({},props,{type:"checkbox",indeterminate:!0!==value||!1!==value,onChange:function onChange(_e,data){return _onChange2(data.checked)},checked:value||!1}));default:return Object(jsx_runtime.jsx)(ShexForm_Container,{notImplemented:!0,children:"other xsd"})}},updatePath=function updatePath(_ref15){for(var path=_ref15.path,context=_objectWithoutProperties(_ref15,_excluded3),_len=arguments.length,pathElements=new Array(_len>1?_len-1:0),_key2=1;_key2<_len;_key2++)pathElements[_key2-1]=arguments[_key2];return Object.assign({path:[].concat(_toConsumableArray(path),pathElements)},context)},ShexForm_ValuesDropdown=function ValuesDropdown(_ref16){var values=_ref16.values,props=_objectWithoutProperties(_ref16,_excluded4),options=filterUndefOrNull(values.map((function(v){return function isObjectLiteral(value){return"string"==typeof value.value}(v)?{key:v.value,value:v.value,text:v.value}:function isIRIRef(value){return"string"==typeof value}(v)?{key:v,value:v,text:v}:void 0})));return Object(jsx_runtime.jsx)(Form.a.Dropdown,Object.assign({},props,{options:options}))};ShexForm_ValuesDropdown.displayName="ValuesDropdown";var validator_required=function required(value){return null==value?"required form filed":void 0},validator_matchesPattern=function matchesPattern(pattern,value){return"string"==typeof value?new RegExp(pattern).test(value)?void 0:"the input must follow the pattern "+pattern:void 0},tripleConstraintShapeExpr_Shape=function Shape(_ref17){var context=_ref17.context,shape=_ref17.shape;_ref17.tripleConstraint,_ref17.label,_ref17.zeroOrOne;return shape.expression?Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"Shape",style:{border:"solid 1px black"},children:Object(jsx_runtime.jsx)(TripleExprSwitch,{context:context,expr:shape.expression})}):null},tripleConstraintShapeExpr_ShapeOr=function ShapeOr(_ref18){_ref18.context,_ref18.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeOr",notImplemented:!0})},tripleConstraintShapeExpr_ShapeAnd=function ShapeAnd(_ref19){_ref19.context,_ref19.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeAnd",notImplemented:!0})},tripleConstraintShapeExpr_ShapeExternal=function ShapeExternal(_ref20){_ref20.context,_ref20.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeExternal",notImplemented:!0})},tripleConstraintShapeExpr_ShapeNot=function ShapeNot(_ref21){_ref21.context,_ref21.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeNot",notImplemented:!0})},tripleConstraintShapeExpr_NodeConstraint=function NodeConstraint(_ref22){var context=_ref22.context,shape=_ref22.shape,tripleConstraint=_ref22.tripleConstraint,zeroOrOne=_ref22.zeroOrOne,label=iri2Label(tripleConstraint.predicate),data=ShexForm_useData(context),handleChange=Object(react.useCallback)((function(_data,isIRI){context.events.onChange(context,{value:_data,isIRI:isIRI})}),[context]),handleRemove=Object(react.useCallback)((function(){context.events.onRemove(context,{predicate:tripleConstraint.predicate})}),[context]);if("iri"===shape.nodeKind){var error=filterUndefOrNull([zeroOrOne?void 0:validator_required(data),shape.pattern?validator_matchesPattern(shape.pattern,data):void 0]);return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"triple NodeConstraint",children:Object(jsx_runtime.jsx)(ShexForm_IRIChooser,{onChange:function onChange(data){return handleChange(data,!0)},onRemove:function onRemove(){return handleRemove()},allowDelete:zeroOrOne,value:data,label:label,error:error.length>0?error:void 0,baseURI:context.baseURI})})}return Object(jsx_runtime.jsxs)(ShexForm_Container,{shapeName:"triple NodeConstraint",children:[shape.datatype&&Object(jsx_runtime.jsx)(ShexForm_PrimitiveForm,{datatype:shape.datatype,label:label,allowDelete:zeroOrOne,value:(null==data?void 0:data["@value"])||null,onChange:function onChange(data){return handleChange(data,!1)},onRemove:function onRemove(){return handleRemove()}}),shape.values&&Object(jsx_runtime.jsx)(ShexForm_ValuesDropdown,{values:shape.values,label:label})]})},shapeExpressions={Shape:function(_Shape){function Shape(_x){return _Shape.apply(this,arguments)}return Shape.toString=function(){return _Shape.toString()},Shape}((function(_ref23){var context=_ref23.context,shape=_ref23.shape;return shape.expression?Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"Shape",children:Object(jsx_runtime.jsx)(TripleExprSwitch,{context:context,expr:shape.expression})}):null})),ShapeOr:function(_ShapeOr){function ShapeOr(_x2){return _ShapeOr.apply(this,arguments)}return ShapeOr.toString=function(){return _ShapeOr.toString()},ShapeOr}((function(_ref24){_ref24.context,_ref24.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeOr",notImplemented:!0})})),ShapeAnd:function(_ShapeAnd){function ShapeAnd(_x3){return _ShapeAnd.apply(this,arguments)}return ShapeAnd.toString=function(){return _ShapeAnd.toString()},ShapeAnd}((function(_ref25){_ref25.context,_ref25.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeAnd",notImplemented:!0})})),ShapeExternal:function(_ShapeExternal){function ShapeExternal(_x4){return _ShapeExternal.apply(this,arguments)}return ShapeExternal.toString=function(){return _ShapeExternal.toString()},ShapeExternal}((function(_ref26){_ref26.context,_ref26.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeExternal",notImplemented:!0})})),ShapeNot:function(_ShapeNot){function ShapeNot(_x5){return _ShapeNot.apply(this,arguments)}return ShapeNot.toString=function(){return _ShapeNot.toString()},ShapeNot}((function(_ref27){_ref27.context,_ref27.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeNot",notImplemented:!0})})),NodeConstraint:function(_NodeConstraint){function NodeConstraint(_x6){return _NodeConstraint.apply(this,arguments)}return NodeConstraint.toString=function(){return _NodeConstraint.toString()},NodeConstraint}((function(_ref28){_ref28.context,_ref28.shape;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"NodeConstraint",notImplemented:!0})}))},ShexForm_useData=function useData(context){var rdfDocument=context.rdfDocument,path=context.path,_useState10=_slicedToArray(Object(react.useState)(),2),data=_useState10[0],setData=_useState10[1];return Object(react.useEffect)((function(){var path_=_toArray(path).slice(1);setData(getSubTreeByPath(rdfDocument,path_))}),[rdfDocument,path,setData]),data},makeKey=function makeKey(path){return _toConsumableArray(path).join(".")},triplExpr_EachOf=function EachOf(_ref29){var context=_ref29.context,expr=_ref29.expr;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"EachOf",children:expr.expressions.map((function(expr,i){return Object(jsx_runtime.jsx)(react.Fragment,{children:Object(jsx_runtime.jsx)(TripleExprSwitch,{context:context,expr:expr})},makeKey([].concat(_toConsumableArray(context.path),[i])))}))})},triplExpr_OneOf=function OneOf(_ref30){var context=_ref30.context,expr=_ref30.expr,_useState12=_slicedToArray(Object(react.useState)(0),2),currentOption=_useState12[0],setCurrentOption=_useState12[1],options=expr.expressions.map((function(_1,i){return{key:i,value:i,text:"Option "+i}})),currentExpr=expr.expressions[currentOption],handleChange=Object(react.useCallback)((function(value){setCurrentOption(value),context.events.onRemove(context,{predicate:null==currentExpr?void 0:currentExpr.predicate})}),[setCurrentOption,currentExpr]);return Object(jsx_runtime.jsxs)(ShexForm_Container,{shapeName:"OneOf",children:[Object(jsx_runtime.jsx)(FormDropdown.a,{label:"one of",options:options,onChange:function onChange(_e,data){return handleChange(data.value)},value:currentOption}),currentExpr&&Object(jsx_runtime.jsx)(TripleExprSwitch,{context:context,expr:currentExpr})]})},triplExpr_TripleConstraint=function TripleConstraint(_ref31){var _context$schema$shape,_context$schema$shape2,context=_ref31.context,expr=_ref31.expr,valueExpr=expr.valueExpr&&("string"==typeof expr.valueExpr?null===(_context$schema$shape=context.schema.shapes)||void 0===_context$schema$shape||null===(_context$schema$shape2=_context$schema$shape.find((function(_ref32){return _ref32.id===expr.valueExpr})))||void 0===_context$schema$shape2?void 0:_context$schema$shape2.shapeExpr:expr.valueExpr);return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"Triple Constraint",children:valueExpr&&Object(jsx_runtime.jsx)(ShexForm_TripleConstraintShapeExprContainer,{context:context,tripleConstraint:expr,valueExpr:valueExpr})})},ShexForm_MultiPropertyContainer=function MultiPropertyContainer(props){props.min;var max=props.max,tripleConstraint=props.tripleConstraint,valueExpr=props.valueExpr,context=props.context,data=props.data,label=props.label,count=(null==data?void 0:data.length)||0,isIRI="NodeConstraint"===valueExpr.type&&"iri"===valueExpr.nodeKind;return Object(jsx_runtime.jsxs)("div",{className:"multiple_property_container",style:{margin:"1em 0"},children:[data&&data.length>0&&Object(jsx_runtime.jsx)(Segment.a.Group,{children:data.map((function(object,index){var newContext=updatePath(context,index),_key=makeKey(newContext.path);return Object(jsx_runtime.jsxs)(Segment.a,{style:{display:"flex"},children:[Object(jsx_runtime.jsx)(Label.a,{ribbon:!0,style:{position:"absolute"},children:Object(jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[label,Object(jsx_runtime.jsx)(Icon.a,{link:!0,name:"close",size:"tiny",onClick:function onClick(){return context.events.onRemove(newContext,{predicate:tripleConstraint.predicate,object:object})}})]})}),Object(jsx_runtime.jsx)("div",{style:{marginTop:"2rem"},children:Object(jsx_runtime.jsx)(TripleConstraintShapeExprSwitch,{context:newContext,tripleConstraint:tripleConstraint,valueExpr:valueExpr})})]},_key)}))}),Object(jsx_runtime.jsx)(Button.a,{labelPosition:"left",content:label,icon:"add",disabled:-1!==max&&count>=max,onClick:function onClick(){return context.events.onAddEmptyElement(updatePath(context,count),isIRI)}})]})};ShexForm_MultiPropertyContainer.displayName="MultiPropertyContainer";var ShexForm_TripleConstraintShapeExprContainer=function TripleConstraintShapeExprContainer(_ref33){var context=_ref33.context,tripleConstraint=_ref33.tripleConstraint,valueExpr=_ref33.valueExpr,_tripleConstraint$min=tripleConstraint.min,min=void 0===_tripleConstraint$min?1:_tripleConstraint$min,_tripleConstraint$max=tripleConstraint.max,max=void 0===_tripleConstraint$max?1:_tripleConstraint$max,exactlyOne=1===min&&1===max,zeroOrOne=0===min&&1===max,predicateContext=updatePath(context,tripleConstraint.predicate),firstElementContext=updatePath(predicateContext,0),data=ShexForm_useData(predicateContext),label=iri2Label(tripleConstraint.predicate);return Object(jsx_runtime.jsx)("div",{children:exactlyOne||zeroOrOne?Object(jsx_runtime.jsx)(TripleConstraintShapeExprSwitch,{label:label,zeroOrOne:zeroOrOne,context:firstElementContext,tripleConstraint:tripleConstraint,valueExpr:valueExpr}):Object(jsx_runtime.jsx)(ShexForm_MultiPropertyContainer,{label:label,min:min,max:max,data:data,tripleConstraint:tripleConstraint,valueExpr:valueExpr,context:predicateContext})})};ShexForm_TripleConstraintShapeExprContainer.displayName="TripleConstraintShapeExprContainer";var TripleExprSwitch=function TripleExprSwitch(_ref34){var context=_ref34.context,expr=_ref34.expr;if("object"!=typeof expr)throw new Error("Triple Expression IRI Ref not yet implemented");switch(expr.type){case"EachOf":return triplExpr_EachOf({context:context,expr:expr});case"OneOf":return triplExpr_OneOf({context:context,expr:expr});case"TripleConstraint":return triplExpr_TripleConstraint({context:context,expr:expr})}},TripleConstraintShapeExprSwitch=function TripleConstraintShapeExprSwitch(_ref35){var valueExpr=_ref35.valueExpr,props=_objectWithoutProperties(_ref35,_excluded5);switch(valueExpr.type){case"Shape":return tripleConstraintShapeExpr_Shape(Object.assign({},props,{shape:valueExpr}));case"ShapeAnd":return tripleConstraintShapeExpr_ShapeAnd(Object.assign({},props,{shape:valueExpr}));case"ShapeOr":return tripleConstraintShapeExpr_ShapeOr(Object.assign({},props,{shape:valueExpr}));case"ShapeNot":return tripleConstraintShapeExpr_ShapeNot(Object.assign({},props,{shape:valueExpr}));case"ShapeExternal":return tripleConstraintShapeExpr_ShapeExternal(Object.assign({},props,{shape:valueExpr}));case"NodeConstraint":return tripleConstraintShapeExpr_NodeConstraint(Object.assign({},props,{shape:valueExpr}))}},ShapeExprSwitch=function ShapeExprSwitch(_ref36){var context=_ref36.context,shapeDecl=_ref36.shapeDecl;switch(shapeDecl.shapeExpr.type){case"Shape":return shapeExpressions.Shape({context:context,shape:shapeDecl.shapeExpr});case"ShapeAnd":return shapeExpressions.ShapeAnd({context:context,shape:shapeDecl.shapeExpr});case"ShapeOr":return shapeExpressions.ShapeOr({context:context,shape:shapeDecl.shapeExpr});case"ShapeNot":return shapeExpressions.ShapeNot({context:context,shape:shapeDecl.shapeExpr});case"ShapeExternal":return shapeExpressions.ShapeExternal({context:context,shape:shapeDecl.shapeExpr});case"NodeConstraint":return shapeExpressions.NodeConstraint({context:context,shape:shapeDecl.shapeExpr})}},ShexForm_ShapeDeclComponent=function ShapeDeclComponent(_ref37){var context=_ref37.context,shapeDecl=_ref37.shapeDecl;return Object(jsx_runtime.jsx)(ShexForm_Container,{shapeName:"ShapeDecl",children:Object(jsx_runtime.jsx)(ShapeExprSwitch,{context:context,shapeDecl:shapeDecl})})};ShexForm_ShapeDeclComponent.displayName="ShapeDeclComponent";var components_ShexForm=ShexForm;try{ShexForm.displayName="ShexForm",ShexForm.__docgenInfo={description:"Main Component",displayName:"ShexForm",props:{shexDocument:{defaultValue:null,description:"",name:"shexDocument",required:!0,type:{name:"string | Schema"}},baseURI:{defaultValue:null,description:"",name:"baseURI",required:!0,type:{name:"string"}},startShapeURI:{defaultValue:null,description:"",name:"startShapeURI",required:!1,type:{name:"string"}},rootURI:{defaultValue:null,description:"",name:"rootURI",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ShexForm.tsx#ShexForm"]={docgenInfo:ShexForm.__docgenInfo,name:"ShexForm",path:"src/components/ShexForm.tsx#ShexForm"})}catch(__react_docgen_typescript_loader_error){}__webpack_exports__.default={component:components_ShexForm,parameters:{layout:"fullscreen"},argTypes:{debugEnabled:{description:"verbose debug output",control:"radio",defaultValue:!0}}};var ShexForm_stories_Template=function Template(args){return Object(jsx_runtime.jsx)(Container_Container.a,{children:Object(jsx_runtime.jsx)(components_ShexForm,Object.assign({},args,{shexDocument:'\nPREFIX foaf: <http://xmlns.com/foaf/0.1/>\nPREFIX vc: <http://www.w3.org/2006/vcard/ns#>\nPREFIX xsd: <http://www.w3.org/2001/XMLSchema#>\nPREFIX : <http://janeirodigital.com/layout#>\nPREFIX solid: <http://www.w3.org/ns/solid/terms#>\nBASE <http://a.example/schema1>\n\n<#UserProfile> {\n  $<#UserProfile-TC-webid-1>\n      solid:webid IRI ;\n\n      (   foaf:name xsd:string MinLength 2\n        | foaf:givenName xsd:string ;\n          foaf:familyName xsd:string\n        | foaf:alias @<#UserProfile> ;\n      )? ;\n\n      vc:telephone IRI /^tel:\\+?[0-9.-]/ ? ;\n\n      vc:hasAddress @<#vcard_street-address> * ;\n\n  $<#UserProfile-TC-organization-name-1>\n      vc:organization-name xsd:string * ;\n\n      vc:someInt xsd:integer ;\n      vc:otherInt xsd:integer OR xsd:string ;\n      vc:registered xsd:boolean ;\n}\n\n<#vcard_street-address> CLOSED {\n  $<#vcard_street-address-type>\n    a [vc:Home vc:Postal] ? ;\n\n  $<#vcard_street-address-street-address-1>\n      vc:street-address xsd:string ? ;\n\n      (   vc:locality xsd:string ? ;\n        | vc:region xsd:string ?\n      ) ;\n\n  $<#vcard_street-address-country-name-1>\n      vc:country-name @<#vcard_country-name> ? ;\n      vc:postal-code xsd:string ?\n}\n\n<#vcard_country-name> [\n  "Afghanistan"\n  "Belgium"\n  "CR"\n  "France"\n  "日本"\n  "United Kingdom"\n  "United States"\n  "Zimbabwe"\n]\n\n<#IssueShape> {\n  foaf:reproducedBy @<#EmployeeShape>?\n}\n\nABSTRACT <#PersonShape> {\n  foaf:name xsd:string ;\n  foaf:mbox IRI\n}\n\n<#UserShape> EXTENDS @<#PersonShape> {\n  foaf:representative @<#EmployeeShape>\n}\n\nABSTRACT <#RepShape> {\n  foaf:phone IRI+\n}\n\n<#EmployeeShape>\n  EXTENDS @<#PersonShape> EXTENDS @<#RepShape> {\n}\n',baseURI:"http://a.example/schema1",startShapeURI:"http://a.example/schema1#UserProfile",rootURI:"http://example.org/me"}))})};ShexForm_stories_Template.displayName="Template";var BasicForm=ShexForm_stories_Template.bind({});BasicForm.parameters=Object.assign({storySource:{source:"( args ) => <Container>\n  <ShexForm {...args} shexDocument={shexSchema} baseURI={baseURI} startShapeURI='http://a.example/schema1#UserProfile' rootURI={'http://example.org/me'}/>\n</Container>"}},BasicForm.parameters)},"./storybook-init-framework-entry.js":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/react/dist/esm/client/index.js")},0:function(module,exports,__webpack_require__){__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/polyfills.js"),__webpack_require__("./node_modules/@storybook/core-client/dist/esm/globals/globals.js"),__webpack_require__("./storybook-init-framework-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/docs/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/react/dist/esm/client/preview/config-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-links/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-docs/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-actions/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-backgrounds/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-measure/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-outline/preview.js-generated-config-entry.js"),__webpack_require__("./node_modules/@storybook/addon-interactions/preview.js-generated-config-entry.js"),__webpack_require__("./.storybook/preview.js-generated-config-entry.js"),module.exports=__webpack_require__("./generated-stories-entry.js")},1:function(module,exports){}},[[0,5,6]]]);